<div *ngIf="!loading && movie" 
     class="relative min-h-screen text-white bg-gradient-to-br from-gray-900 via-gray-800 to-black">
  <app-header></app-header>

  <!-- Background Poster -->
  <div 
    class="absolute inset-0 opacity-30"
    [style.backgroundImage]="'url(https://image.tmdb.org/t/p/original' + movie.backdrop_path + ')'"
    style="background-size: cover; background-position: center; z-index: -1;">
  </div>

  <!-- Overlay -->
  <div class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/60 to-black/90 z-[-1]"></div>

  <!-- Content -->
  <div class="relative max-w-6xl mx-auto p-8 flex flex-col md:flex-row gap-10">
    
    <!-- Poster -->
    <div class="flex-shrink-0">
      <img 
        [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
        [alt]="movie.title"
        class="rounded-xl shadow-2xl w-72 md:w-80 object-cover"
      />
    </div>

    <!-- Details -->
    <div class="flex flex-col justify-center">
      <h1 class="text-4xl font-extrabold mb-3">
        {{ movie.title }}
        <span class="text-gray-400">({{ movie.release_date | date:'yyyy' }})</span>
      </h1>
      <p class="italic text-gray-300 mb-2">{{ movie.tagline }}</p>

      <!-- Meta -->
      <div class="flex flex-wrap gap-3 text-gray-300 text-sm mb-4">
        <span>{{ movie.runtime }} mins</span>
        <span *ngFor="let g of movie.genres">{{ g.name }}</span>
        <span>{{ movie.status }}</span>
      </div>

      <!-- Rating -->
      <div class="flex items-center gap-4 mb-6">
        <!-- Donut Meter -->
        <div class="relative w-16 h-16">
          <div class="absolute inset-0 rounded-full bg-[#0d253f]"></div>
          <div class="absolute inset-[3px] rounded-full" [ngStyle]="circleStyle"></div>
          <div class="absolute inset-[7px] rounded-full bg-gray-900 flex items-center justify-center">
            <span class="font-extrabold text-base leading-none">
              {{ userScore }}<span class="text-[10px] align-super">%</span>
            </span>
          </div>
        </div>
        <div class="leading-tight">
          <div class="text-sm font-semibold">User</div>
          <div class="text-sm font-semibold">Score</div>
        </div>
      </div>

      <!-- Overview -->
      <h3 class="text-xl font-semibold mb-2">Overview</h3>
      <p class="text-gray-200 leading-relaxed mb-6">{{ movie.overview }}</p>

      <!-- Director -->
      <div class="flex items-center mb-6">
        <h3 class="text-xl font-semibold mr-2">Director :</h3>
        <p class="text-gray-200 leading-relaxed mt-1 text-l">{{ directorName }}</p>
      </div>

      <!-- Cast -->
      <h3 class="text-lg font-semibold mb-1">Top Cast</h3>
      <div class="flex flex-wrap gap-2 mb-6">
        <span *ngFor="let c of topCast" class="text-sm bg-gray-900 px-2 py-1 rounded">
          {{ c.name }} as {{ c.character }}
        </span>
      </div>

      <!-- Production -->
      <p class="text-sm text-gray-300 mb-2">
        <strong class="text-xl font-semibold mr-2">Production:</strong>
        <span *ngFor="let pc of movie.production_companies">{{ pc.name }} </span>
      </p>
    </div>
  </div>

  <!-- üé¨ Trailer Section -->
  <div *ngIf="trailerUrl" class="max-w-6xl mx-auto p-8">
   <h3 class="text-2xl font-bold mb-4 border-b border-gray-700 pb-2 flex items-center gap-2">
    <span class="text-yellow-400">‚ñ∂Ô∏è</span> Trailer
  </h3>
    <div class="rounded-xl overflow-hidden shadow-2xl">
      <iframe
        [src]="trailerUrl | safeUrl"
        width="100%"
        height="500"
        frameborder="0"
        allowfullscreen
        class="rounded-xl">
      </iframe>
    </div>
  </div>

</div>
